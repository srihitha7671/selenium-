package pac1;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import java.time.Duration;

public class LAB_6 {
    public static void main(String[] args) {
        // Set up WebDriver
        WebDriver driver = new ChromeDriver();
        driver.manage().window().maximize();
        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));

        try {
            // 1. Login with credentials created in Lab 1
            driver.get("https://tutorialsninja.com/demo/index.php?route=account/login");
            driver.findElement(By.id("input-email")).sendKeys("srihitha@test.com");
            driver.findElement(By.id("input-password")).sendKeys("Password123");
            driver.findElement(By.cssSelector("input[value='Login']")).click();
            System.out.println("Login successful with: srihitha@test.com");

            // 2. Go to 'Components' tab and click 'Monitors'
            WebElement componentsMenu = driver.findElement(By.linkText("Components"));
            Actions actions = new Actions(driver);
            actions.moveToElement(componentsMenu).perform();

            wait.until(ExpectedConditions.elementToBeClickable(By.partialLinkText("Monitors"))).click();

            // 3. Select 25 from 'Show' dropdown
            WebElement showDropdown = wait.until(ExpectedConditions.elementToBeClickable(By.id("input-limit")));
            showDropdown.sendKeys("25");

            // 4. Click on 'Add to cart' for Samsung SyncMaster 941BW
            WebElement samsungAddToCart = driver.findElement(By.xpath("//a[text()='Samsung SyncMaster 941BW']/../..//button[@data-original-title='Add to Cart']"));
            samsungAddToCart.click();

            // 5. Click on 'Specification' tab (for Samsung product)
            driver.findElement(By.linkText("Samsung SyncMaster 941BW")).click();
            wait.until(ExpectedConditions.elementToBeClickable(By.xpath("//a[text()='Specification']"))).click();

            // 6. Verify details present on the page
            WebElement specTab = wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("tab-specification")));
            if (specTab.isDisplayed()) {
                System.out.println("Specification details are present for Samsung SyncMaster 941BW");
            }

            // 7. Click on 'Add to Wish list' button
            driver.findElement(By.xpath("//button[@data-original-title='Add to Wish List']")).click();

            // 8. Verify success message for Wish List
            WebElement wishMsg = wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".alert-success")));
            System.out.println("Message: " + wishMsg.getText());

            // 9. Enter 'Mobile' in Search text box
            driver.findElement(By.name("search")).sendKeys("Mobile");

            // 10. Click on 'Search' button
            driver.findElement(By.cssSelector("button.btn.btn-default.btn-lg")).click();

            // 11. Click on 'Search in product descriptions' check box
            driver.findElement(By.name("description")).click();

            // 12. Click on link 'HTC Touch HD'
            driver.findElement(By.linkText("HTC Touch HD")).click();

            // 13. Clear '1' from Qty and enter '3'
            WebElement qty = driver.findElement(By.id("input-quantity"));
            qty.clear();
            qty.sendKeys("3");

            // 14. Click on 'Add to Cart' button
            driver.findElement(By.id("button-cart")).click();

            // 15. Verify success message for HTC Touch HD
            WebElement cartMsg = wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".alert-success")));
            System.out.println("Message: " + cartMsg.getText());

            // 16. Click on 'View cart' button (next to search)
            driver.findElement(By.id("cart-total")).click();
            driver.findElement(By.linkText("View Cart")).click();

            // 17. Verify Mobile name in cart
            WebElement cartItem = wait.until(ExpectedConditions.visibilityOfElementLocated(By.linkText("HTC Touch HD")));
            if (cartItem.isDisplayed()) {
                System.out.println("HTC Touch HD is present in the cart");
            }

            // 18. Click on 'Checkout' button
            driver.findElement(By.linkText("Checkout")).click();

            // 19. Click on 'My Account' dropdown
            driver.findElement(By.linkText("My Account")).click();

            // 20. Select 'Logout' from dropdown
            driver.findElement(By.linkText("Logout")).click();

            // 21. Verify 'Account Logo'
            WebElement logo = wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("logo")));
            if (logo.isDisplayed()) {
                System.out.println("Logout successful and Account logo verified");
            }

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            driver.quit();
        }
    }
}
