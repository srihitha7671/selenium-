import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import java.time.Duration;

public class LAB_6 {
    public static void main(String[] args) {
        // Set up WebDriver
        WebDriver driver = new ChromeDriver();
        driver.manage().window().maximize();
        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(15));

        try {
            // 1. Login with credentials
            driver.get("https://tutorialsninja.com/demo/index.php?route=account/login");
            driver.findElement(By.id("input-email")).sendKeys("srihitha@test.com");
            driver.findElement(By.id("input-password")).sendKeys("12345");
            driver.findElement(By.cssSelector("input[value='Login']")).click();

            // 2. Go to 'Components' tab and click
            driver.findElement(By.linkText("Components")).click();

            // 3. Select 'Monitors'
            driver.findElement(By.linkText("Monitors (2)")).click();

            // 4. Select 25 from 'Show' dropdown
            Select showDropdown = new Select(driver.findElement(By.id("input-limit")));
            showDropdown.selectByVisibleText("25");

            // 5. Click on 'Add to cart' for the first item
            driver.findElement(By.xpath("(//button[@data-original-title='Add to Cart'])[1]")).click();

            // 6. Click on 'Specification' tab
            driver.findElement(By.linkText("Specification")).click();

            // 7. Verify details present on the page
            WebElement specTable = driver.findElement(By.id("tab-specification"));
            if (specTable.isDisplayed()) {
                System.out.println("Specification details are displayed.");
            }

            // 8. Click on 'Add to Wish list' button
            driver.findElement(By.xpath("(//button[@data-original-title='Add to Wish List'])[1]")).click();

            // 9. Verify success message
            wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".alert-success")));
            System.out.println(driver.findElement(By.cssSelector(".alert-success")).getText());

            // 10. Enter 'Mobile' in 'Search' text box
            driver.findElement(By.name("search")).sendKeys("Mobile");

            // 11. Click on 'Search' button
            driver.findElement(By.cssSelector(".btn.btn-default.btn-lg")).click();

            // 12. Click on 'Search in product descriptions' check box
            driver.findElement(By.name("description")).click();

            // 13. Click on link 'HTC Touch HD'
            driver.findElement(By.linkText("HTC Touch HD")).click();

            // 14. Clear '1' from 'Qty' and enter '3'
            WebElement qtyBox = driver.findElement(By.id("input-quantity"));
            qtyBox.clear();
            qtyBox.sendKeys("3");

            // 15. Click on 'Add to Cart' button
            driver.findElement(By.id("button-cart")).click();

            // 16. Verify success message
            wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".alert-success")));
            System.out.println(driver.findElement(By.cssSelector(".alert-success")).getText());

            // 17. Click on 'View cart' button
            driver.findElement(By.id("cart-total")).click();
            driver.findElement(By.linkText("View Cart")).click();

            // 18. Verify Mobile name added to the cart
            if (driver.getPageSource().contains("HTC Touch HD")) {
                System.out.println("HTC Touch HD is present in the cart.");
            }

            // 19. Click on 'Checkout' button
            driver.findElement(By.linkText("Checkout")).click();

            // 20. Click on 'My Account' dropdown
            driver.findElement(By.linkText("My Account")).click();

            // 21. Select 'Logout'
            driver.findElement(By.linkText("Logout")).click();

            // 22. Verify 'Account Logout' heading
            if (driver.getPageSource().contains("Account Logout")) {
                System.out.println("Logout successful.");
            }

            // 23. Click on 'Continue'
            driver.findElement(By.linkText("Continue")).click();

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // Close browser
            driver.quit();
        }
    }
}
