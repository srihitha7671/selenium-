package pac1;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import io.github.bonigarcia.wdm.WebDriverManager;

public class TC001 {

    public static void main(String[] args) throws InterruptedException {
        // Step 1: Setup WebDriver and launch the browser
        WebDriverManager.chromedriver().setup();
        WebDriver driver = new ChromeDriver();
        driver.manage().window().maximize();

        // Step 2: Navigate to the URL
        driver.get("https://tutorialsninja.com/demo/index.php?");
        System.out.println("The title is: " + driver.getTitle());

        // Step 3: Click on 'My Account' dropdown
        driver.findElement(By.linkText("My Account")).click();

        // Step 4: Select 'Register' from dropdown
        driver.findElement(By.linkText("Register")).click();
        System.out.println("The title is: " + driver.getTitle());

        // Step 5: Verify the heading 'Register Account'
        WebElement heading = driver.findElement(By.xpath("//h1[contains(text(),'Register Account')]"));
        System.out.println("Heading is displayed: " + heading.isDisplayed());

        // Step 6: Click on 'Continue' button at the bottom of the page (without filling form)
        WebElement continueButton = driver.findElement(By.xpath("//*[@id='content']/form/div/div/input[2]"));
        continueButton.click();

        // Step 7: Verify warning message 'Warning: You must agree to the Privacy Policy!'
        WebElement warningMessage = driver.findElement(By.xpath("//div[contains(@class, 'alert alert-danger')]"));
        System.out.println("Warning message: " + warningMessage.getText());

        // Part 2: Personal Details Form
        WebElement firstNameField = driver.findElement(By.id("input-firstname"));
        firstNameField.sendKeys("ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567");  // 33 chars
        continueButton.click();

        WebElement errorMessageFirstName = driver.findElement(By.xpath("//input[@id='input-firstname']/following-sibling::div"));
        System.out.println("First Name error: " + errorMessageFirstName.getText());

        WebElement lastNameField = driver.findElement(By.id("input-lastname"));
        lastNameField.sendKeys("QWERTYUIOPLKJHGFDSAZXCVBNM7654321");  // 33 chars
        continueButton.click();

        WebElement errorMessageLastName = driver.findElement(By.xpath("//input[@id='input-lastname']/following-sibling::div"));
        System.out.println("Last Name error: " + errorMessageLastName.getText());

        WebElement emailField = driver.findElement(By.id("input-email"));
        emailField.sendKeys("test" + System.currentTimeMillis() + "@example.com");

        WebElement telephoneField = driver.findElement(By.id("input-telephone"));
        telephoneField.sendKeys("1234567890");

        // Part 3: Password
        WebElement passwordField = driver.findElement(By.id("input-password"));
        passwordField.sendKeys("test1234");

        WebElement confirmPasswordField = driver.findElement(By.id("input-confirm"));
        confirmPasswordField.sendKeys("test1234");

        // Part 4: Newsletter + Privacy Policy
        WebElement newsletterYes = driver.findElement(By.xpath("//input[@name='newsletter' and @value='1']"));
        newsletterYes.click();

        WebElement privacyCheckbox = driver.findElement(By.name("agree"));
        privacyCheckbox.click();

        // Submit
        continueButton.click();

        // Verify success message
        WebElement successHeading = driver.findElement(By.xpath("//h1[contains(text(),'Your Account Has Been Created!')]"));
        System.out.println("Account creation success: " + successHeading.isDisplayed());

        // Final Continue
        driver.findElement(By.xpath("//a[contains(text(),'Continue')]")).click();

        // Navigate to Order History
        driver.findElement(By.linkText("View your order history")).click();
        System.out.println("Navigated to Order History page. Title: " + driver.getTitle());

        driver.quit();
    }
}
